<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VistaView BOSS Dashboard v35.1</title>
    <style>
        :root { --teal: #06b6d4; --purple: #8b5cf6; --green: #22c55e; --red: #ef4444; --gold: #f59e0b; --dark-bg: #0f172a; --border: rgba(139,92,246,0.3); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg, #020617 0%, #1a0a2e 30%, #0f172a 70%, #0a1628 100%); color: #fff; min-height: 100vh; }
        .header { background: rgba(0,0,0,0.5); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); padding: 12px 24px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo h1 { font-size: 1.5em; background: linear-gradient(90deg, var(--teal), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .status-pill { display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.4); border-radius: 50px; font-size: 0.85em; }
        .status-dot { width: 10px; height: 10px; background: var(--green); border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .agentic-bar { background: linear-gradient(135deg, rgba(6,182,212,0.15), rgba(139,92,246,0.15)); border: 1px solid var(--border); border-radius: 16px; margin: 20px; padding: 20px; display: flex; align-items: center; gap: 16px; }
        .voice-btn { width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--teal), var(--purple)); border: none; cursor: pointer; font-size: 1.5em; box-shadow: 0 4px 20px rgba(139,92,246,0.4); transition: all 0.3s; }
        .voice-btn:hover { transform: scale(1.1); }
        .voice-btn.listening { animation: pulse-ring 1.5s infinite; background: linear-gradient(135deg, var(--green), var(--teal)); }
        @keyframes pulse-ring { 0% { box-shadow: 0 0 0 0 rgba(34,197,94,0.7); } 70% { box-shadow: 0 0 0 20px rgba(34,197,94,0); } 100% { box-shadow: 0 0 0 0 rgba(34,197,94,0); } }
        .teleprompter { flex: 1; background: rgba(0,0,0,0.3); border-radius: 12px; padding: 16px 20px; min-height: 60px; }
        .teleprompter-label { font-size: 0.75em; color: var(--teal); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px; }
        .text-input { flex: 0.5; display: flex; gap: 10px; }
        .text-input input { flex: 1; background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: 10px; padding: 12px 16px; color: #fff; font-size: 1em; }
        .text-input input:focus { outline: none; border-color: var(--teal); }
        .send-btn { background: linear-gradient(135deg, var(--teal), var(--purple)); border: none; border-radius: 10px; padding: 12px 20px; color: #fff; cursor: pointer; font-weight: 600; }
        .large-stats { display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin: 0 20px 16px; }
        @media (max-width: 1200px) { .large-stats { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { .large-stats { grid-template-columns: repeat(2, 1fr); } }
        .large-stat { background: linear-gradient(135deg, rgba(6,182,212,0.1), rgba(139,92,246,0.1)); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center; }
        .large-stat-value { font-size: 1.8em; font-weight: bold; background: linear-gradient(90deg, var(--teal), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .large-stat-label { color: #94a3b8; font-size: 0.8em; margin-top: 2px; }
        .large-stat-trend { color: var(--green); font-size: 0.75em; margin-top: 4px; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; padding: 0 20px 20px; }
        .card { background: rgba(15,23,42,0.8); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 16px; padding: 16px; transition: all 0.3s; }
        .card:hover { border-color: var(--purple); transform: translateY(-2px); box-shadow: 0 10px 40px rgba(139,92,246,0.2); }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .card-title { font-size: 0.95em; color: var(--teal); display: flex; align-items: center; gap: 8px; }
        .card-badge { background: rgba(34,197,94,0.2); color: var(--green); padding: 3px 10px; border-radius: 20px; font-size: 0.7em; display: flex; align-items: center; gap: 4px; }
        .card-badge::before { content: ''; width: 6px; height: 6px; background: var(--green); border-radius: 50%; animation: pulse 1.5s infinite; }
        .span-8 { grid-column: span 8; } .span-6 { grid-column: span 6; } .span-4 { grid-column: span 4; } .span-3 { grid-column: span 3; } .span-12 { grid-column: span 12; }
        @media (max-width: 1200px) { .span-8, .span-6, .span-4, .span-3 { grid-column: span 6; } }
        @media (max-width: 768px) { .span-8, .span-6, .span-4, .span-3 { grid-column: span 12; } }
        .boss-table { width: 100%; border-collapse: collapse; font-size: 0.85em; }
        .boss-table th { text-align: left; padding: 8px; color: var(--teal); font-size: 0.75em; text-transform: uppercase; border-bottom: 1px solid var(--border); }
        .boss-table td { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .intent-badge { display: inline-block; padding: 2px 8px; border-radius: 20px; font-size: 0.7em; font-weight: 600; }
        .intent-query { background: rgba(6,182,212,0.2); color: var(--teal); }
        .intent-navigation { background: rgba(139,92,246,0.2); color: var(--purple); }
        .intent-create { background: rgba(34,197,94,0.2); color: var(--green); }
        .intent-status, .intent-help { background: rgba(245,158,11,0.2); color: var(--gold); }
        .intent-search { background: rgba(6,182,212,0.2); color: var(--teal); }
        .intent-general { background: rgba(148,163,184,0.2); color: #94a3b8; }
        .sentiment-positive { color: var(--green); } .sentiment-negative { color: var(--red); } .sentiment-neutral { color: #94a3b8; }
        .source-item { display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; margin-bottom: 8px; }
        .source-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--teal), var(--purple)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1em; }
        .source-info { flex: 1; } .source-name { font-weight: 600; font-size: 0.9em; } .source-cat { font-size: 0.7em; color: #64748b; }
        .source-stats { text-align: right; } .source-count { font-weight: bold; color: var(--teal); font-size: 0.95em; }
        .source-status { font-size: 0.65em; color: var(--green); display: flex; align-items: center; gap: 4px; justify-content: flex-end; }
        .source-status::before { content: '‚óè'; font-size: 0.6em; }
        .pattern-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 10px; background: rgba(0,0,0,0.2); border-radius: 6px; margin-bottom: 6px; font-size: 0.85em; }
        .pattern-type { background: rgba(139,92,246,0.2); color: var(--purple); padding: 2px 8px; border-radius: 10px; font-size: 0.7em; margin-right: 8px; }
        .pattern-count { background: var(--teal); color: #000; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; }
        .empathy-container { display: flex; flex-direction: column; align-items: center; }
        .empathy-circle { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(var(--green) 0% var(--empathy-pct, 89%), rgba(255,255,255,0.1) var(--empathy-pct, 89%) 100%); display: flex; align-items: center; justify-content: center; }
        .empathy-inner { width: 95px; height: 95px; background: var(--dark-bg); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .empathy-score { font-size: 1.6em; font-weight: bold; color: var(--green); }
        .empathy-label { font-size: 0.7em; color: #94a3b8; }
        .sentiment-row { display: flex; gap: 20px; margin-top: 16px; }
        .sentiment-item { text-align: center; } .sentiment-value { font-size: 1.3em; font-weight: bold; } .sentiment-label { font-size: 0.7em; color: #64748b; }
        .tables-grid { display: flex; flex-wrap: wrap; gap: 6px; }
        .table-tag { background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.3); padding: 4px 10px; border-radius: 15px; font-size: 0.75em; display: flex; align-items: center; gap: 6px; }
        .table-tag::before { content: '‚óè'; color: var(--green); font-size: 0.5em; }
        .table-count { background: rgba(6,182,212,0.3); padding: 1px 6px; border-radius: 10px; font-size: 0.8em; color: var(--teal); }
        .activity-item { display: flex; align-items: flex-start; gap: 10px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.85em; }
        .activity-dot { width: 8px; height: 8px; background: var(--green); border-radius: 50%; margin-top: 5px; animation: pulse 2s infinite; }
        .activity-text { color: #e2e8f0; } .activity-time { font-size: 0.75em; color: #64748b; }
        .price-item { display: flex; justify-content: space-between; padding: 8px 10px; background: rgba(0,0,0,0.2); border-radius: 6px; margin-bottom: 6px; font-size: 0.85em; }
        .price-source { color: var(--teal); font-size: 0.75em; } .price-value { font-weight: bold; }
        .price-trend-up { color: var(--green); } .price-trend-down { color: var(--red); } .price-trend-stable { color: var(--gold); }
        .refresh-bar { position: fixed; bottom: 16px; right: 16px; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); border: 1px solid var(--border); padding: 8px 16px; border-radius: 25px; display: flex; align-items: center; gap: 8px; font-size: 0.8em; }
        .refresh-spinner { width: 14px; height: 14px; border: 2px solid var(--border); border-top-color: var(--teal); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .crawl-btn { background: linear-gradient(135deg, var(--teal), var(--purple)); border: none; padding: 6px 12px; border-radius: 15px; color: #fff; font-size: 0.75em; cursor: pointer; margin-left: 8px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo"><span style="font-size:1.5em;">üè†</span><h1>VistaView BOSS Dashboard</h1><span style="color:#64748b;font-size:0.8em;">v35.1</span></div>
        <div style="display:flex;align-items:center;gap:20px;">
            <span style="color:#64748b;font-size:0.8em;" id="lastUpdate">Loading...</span>
            <div class="status-pill"><div class="status-dot"></div><span>All Systems Active</span></div>
        </div>
    </div>
    
    <div class="agentic-bar">
        <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()">üé§</button>
        <div class="teleprompter">
            <div class="teleprompter-label">MR. V AI ASSISTANT</div>
            <div id="teleprompterText">Click microphone or type command. Try: "show status", "help", "search products"...</div>
        </div>
        <div class="text-input">
            <input type="text" id="textInput" placeholder="Type command..." onkeypress="if(event.key==='Enter')sendCommand()">
            <button class="send-btn" onclick="sendCommand()">Send</button>
        </div>
    </div>
    
    <div class="large-stats">
        <div class="large-stat"><div class="large-stat-value" id="voiceCommandsCount">0</div><div class="large-stat-label">Voice Commands</div><div class="large-stat-trend">‚Üë Active</div></div>
        <div class="large-stat"><div class="large-stat-value" id="interactionsCount">0</div><div class="large-stat-label">Interactions</div><div class="large-stat-trend">‚Üë Learning</div></div>
        <div class="large-stat"><div class="large-stat-value" id="patternsCount">0</div><div class="large-stat-label">Patterns</div><div class="large-stat-trend">‚Üë Growing</div></div>
        <div class="large-stat"><div class="large-stat-value" id="crawledCount">0</div><div class="large-stat-label">Items Crawled</div><div class="large-stat-trend">‚Üë Indexing</div></div>
        <div class="large-stat"><div class="large-stat-value" id="tablesCount">0</div><div class="large-stat-label">DB Tables</div><div class="large-stat-trend">‚Üë Active</div></div>
        <div class="large-stat"><div class="large-stat-value" id="accuracyScore">94.7%</div><div class="large-stat-label">Accuracy</div><div class="large-stat-trend">‚Üë Optimizing</div></div>
    </div>
    
    <div class="dashboard-grid">
        <div class="card span-8">
            <div class="card-header"><div class="card-title">üé§ BOSS Voice Commands</div><div class="card-badge">Live</div></div>
            <div style="overflow-x:auto;max-height:280px;">
                <table class="boss-table">
                    <thead><tr><th>Time</th><th>Input</th><th>Intent</th><th>Sentiment</th><th>Confidence</th></tr></thead>
                    <tbody id="bossTableBody"><tr><td colspan="5" style="text-align:center;color:#64748b;">Loading...</td></tr></tbody>
                </table>
            </div>
        </div>
        
        <div class="card span-4">
            <div class="card-header"><div class="card-title">üíö Empathy & Sentiment</div><div class="card-badge">Analyzing</div></div>
            <div class="empathy-container">
                <div class="empathy-circle" id="empathyCircle"><div class="empathy-inner"><div class="empathy-score" id="empathyScore">89%</div><div class="empathy-label">Empathy</div></div></div>
                <div class="sentiment-row">
                    <div class="sentiment-item"><div class="sentiment-value sentiment-positive" id="sentimentPositive">0</div><div class="sentiment-label">Positive</div></div>
                    <div class="sentiment-item"><div class="sentiment-value sentiment-neutral" id="sentimentNeutral">0</div><div class="sentiment-label">Neutral</div></div>
                    <div class="sentiment-item"><div class="sentiment-value sentiment-negative" id="sentimentNegative">0</div><div class="sentiment-label">Negative</div></div>
                </div>
            </div>
        </div>
        
        <div class="card span-4">
            <div class="card-header"><div class="card-title">üåê Web Crawling</div><div class="card-badge">Active</div><button class="crawl-btn" onclick="triggerAllCrawls()">‚ü≥ Refresh</button></div>
            <div id="sourcesList" style="max-height:250px;overflow-y:auto;">Loading...</div>
        </div>
        
        <div class="card span-4">
            <div class="card-header"><div class="card-title">üß† Learned Patterns</div><div class="card-badge">Training</div></div>
            <div id="patternsList" style="max-height:250px;overflow-y:auto;">Loading...</div>
        </div>
        
        <div class="card span-4">
            <div class="card-header"><div class="card-title">üí∞ Price Intelligence</div><div class="card-badge">Tracking</div></div>
            <div id="priceList" style="max-height:250px;overflow-y:auto;">Loading...</div>
        </div>
        
        <div class="card span-6">
            <div class="card-header"><div class="card-title">üóÑÔ∏è Database Tables</div><div class="card-badge">Connected</div></div>
            <div class="tables-grid" id="tablesList">Loading...</div>
        </div>
        
        <div class="card span-6">
            <div class="card-header"><div class="card-title">‚ö° Recent Activity</div><div class="card-badge">Streaming</div></div>
            <div id="activityFeed" style="max-height:200px;overflow-y:auto;">Loading...</div>
        </div>
    </div>
    
    <div class="refresh-bar"><div class="refresh-spinner"></div><span id="refreshStatus">Auto-refresh: 30s</span></div>
    
    <script>
        let isListening = false, recognition = null;
        const synth = window.speechSynthesis;
        
        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SR();
            recognition.continuous = true; recognition.interimResults = true; recognition.lang = 'en-US';
            recognition.onresult = (e) => { const r = e.results[e.results.length-1]; document.getElementById('teleprompterText').textContent = '"' + r[0].transcript.trim() + '"'; if (r.isFinal) sendBossCommand(r[0].transcript.trim()); };
            recognition.onend = () => { if (isListening) try { recognition.start(); } catch(e) {} };
        }
        
        function toggleVoice() {
            const btn = document.getElementById('voiceBtn');
            if (isListening) { isListening = false; btn.classList.remove('listening'); btn.textContent = 'üé§'; recognition?.stop(); document.getElementById('teleprompterText').textContent = 'Voice paused. Click to resume...'; }
            else { isListening = true; btn.classList.add('listening'); btn.textContent = 'üî¥'; recognition?.start(); document.getElementById('teleprompterText').textContent = 'Listening... Speak your command!'; }
        }
        
        function sendCommand() { const input = document.getElementById('textInput'); if (input.value.trim()) { sendBossCommand(input.value.trim()); input.value = ''; } }
        
        async function sendBossCommand(text) {
            document.getElementById('teleprompterText').textContent = 'Processing: "' + text + '"';
            try {
                const res = await fetch('/api/boss/command', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ text, sessionId: 'dashboard' }) });
                const data = await res.json();
                document.getElementById('teleprompterText').textContent = data.response;
                if (synth && !synth.speaking) { const u = new SpeechSynthesisUtterance(data.response); u.rate = 0.95; synth.speak(u); }
                setTimeout(fetchDashboard, 300);
            } catch (e) { document.getElementById('teleprompterText').textContent = 'Error. Please try again.'; }
        }
        
        async function triggerAllCrawls() { try { await fetch('/api/crawl/trigger-all', { method: 'POST' }); setTimeout(fetchDashboard, 500); } catch(e) {} }
        
        async function fetchDashboard() {
            try {
                const res = await fetch('/api/dashboard/full'); const data = await res.json();
                document.getElementById('voiceCommandsCount').textContent = formatNumber(data.stats.voice_commands);
                document.getElementById('interactionsCount').textContent = formatNumber(data.stats.interactions);
                document.getElementById('patternsCount').textContent = formatNumber(data.stats.patterns_learned);
                document.getElementById('crawledCount').textContent = formatNumber(data.stats.crawled_items);
                document.getElementById('tablesCount').textContent = data.tables?.length || 0;
                document.getElementById('accuracyScore').textContent = data.stats.accuracy.toFixed(1) + '%';
                updateBossTable(data.bossCommands); updateEmpathy(data.empathy); updateSources(data.sources);
                updatePatterns(data.patterns); updateTables(data.tables); updateActivity(data.activity); updatePriceIntel(data.priceIntel);
                document.getElementById('lastUpdate').textContent = 'Updated: ' + new Date().toLocaleTimeString();
            } catch (e) { console.error('Fetch error:', e); }
        }
        
        function formatNumber(n) { if (!n) return '0'; if (n >= 1000000) return (n/1000000).toFixed(1) + 'M'; if (n >= 1000) return (n/1000).toFixed(1) + 'K'; return n.toString(); }
        
        function updateBossTable(commands) {
            const tbody = document.getElementById('bossTableBody');
            if (!commands?.length) { tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;color:#64748b;">No commands yet. Try speaking!</td></tr>'; return; }
            tbody.innerHTML = commands.slice(0,12).map(cmd => {
                const time = new Date(cmd.created_at).toLocaleTimeString();
                const input = (cmd.raw_input || '').substring(0, 35) + ((cmd.raw_input || '').length > 35 ? '...' : '');
                const conf = ((cmd.confidence || 0) * 100).toFixed(0);
                return '<tr><td>' + time + '</td><td title="' + (cmd.raw_input||'') + '">' + (input||'...') + '</td><td><span class="intent-badge intent-' + (cmd.intent||'general') + '">' + (cmd.intent||'general') + '</span></td><td><span class="sentiment-' + (cmd.sentiment||'neutral') + '">' + (cmd.sentiment||'neutral') + '</span></td><td>' + conf + '%</td></tr>';
            }).join('');
        }
        
        function updateEmpathy(empathy) {
            const score = ((empathy.avg_score || 0.89) * 100).toFixed(0);
            document.getElementById('empathyScore').textContent = score + '%';
            document.getElementById('empathyCircle').style.setProperty('--empathy-pct', score + '%');
            document.getElementById('sentimentPositive').textContent = empathy.positive || 0;
            document.getElementById('sentimentNeutral').textContent = empathy.neutral || 0;
            document.getElementById('sentimentNegative').textContent = empathy.negative || 0;
        }
        
        function updateSources(sources) {
            const container = document.getElementById('sourcesList');
            if (!sources?.length) { container.innerHTML = '<div style="color:#64748b;text-align:center;padding:20px;">No sources yet</div>'; return; }
            const icons = { 'Real Estate': 'üè†', 'Furniture': 'üõãÔ∏è', 'Home Improvement': 'üî®', 'Professional': 'üíº', 'Technology': 'üíª', 'E-Commerce': 'üõí', 'Home Design': 'üé®' };
            container.innerHTML = sources.map(src => '<div class="source-item"><div class="source-icon">' + (icons[src.category] || 'üåê') + '</div><div class="source-info"><div class="source-name">' + src.source_name + '</div><div class="source-cat">' + src.category + '</div></div><div class="source-stats"><div class="source-count">' + formatNumber(src.items_crawled) + '</div><div class="source-status">Active</div></div></div>').join('');
        }
        
        function updatePatterns(patterns) {
            const container = document.getElementById('patternsList');
            if (!patterns?.length) { container.innerHTML = '<div style="color:#64748b;">Learning...</div>'; return; }
            container.innerHTML = patterns.slice(0,10).map(p => '<div class="pattern-item"><div><span class="pattern-type">' + p.pattern_type + '</span> ' + (p.pattern_key || '').substring(0, 25) + '</div><span class="pattern-count">√ó' + p.occurrence_count + '</span></div>').join('');
        }
        
        function updateTables(tables) {
            const container = document.getElementById('tablesList');
            if (!tables?.length) { container.innerHTML = '<div style="color:#64748b;">No tables</div>'; return; }
            container.innerHTML = tables.map(t => '<span class="table-tag">' + (t.tablename || t) + '<span class="table-count">' + formatNumber(t.row_count || 0) + '</span></span>').join('');
        }
        
        function updateActivity(activity) {
            const container = document.getElementById('activityFeed');
            if (!activity?.length) { container.innerHTML = '<div style="color:#64748b;">Waiting...</div>'; return; }
            container.innerHTML = activity.slice(0, 8).map(a => '<div class="activity-item"><div class="activity-dot"></div><div><div class="activity-text">' + a.interaction_type + ': ' + (a.input_text || '').substring(0, 40) + '</div><div class="activity-time">' + new Date(a.created_at).toLocaleTimeString() + '</div></div></div>').join('');
        }
        
        function updatePriceIntel(prices) {
            const container = document.getElementById('priceList');
            if (!prices?.length) { container.innerHTML = '<div style="color:#64748b;">Loading...</div>'; return; }
            container.innerHTML = prices.map(p => '<div class="price-item"><div><div>' + p.product_type + '</div><div class="price-source">' + p.source + ' ‚Ä¢ ' + p.category + '</div></div><div style="text-align:right;"><div class="price-value">$' + formatNumber(p.avg_price) + '</div><div class="price-trend-' + p.trend + '">‚Üë ' + p.trend + '</div></div></div>').join('');
        }
        
        const eventSource = new EventSource('/api/sse/dashboard');
        eventSource.onmessage = (e) => { try { const d = JSON.parse(e.data); if (d.type === 'voice_command') setTimeout(fetchDashboard, 100); } catch(e){} };
        
        fetchDashboard(); setInterval(fetchDashboard, 30000);
        let countdown = 30; setInterval(() => { countdown = countdown <= 0 ? 30 : countdown - 1; document.getElementById('refreshStatus').textContent = 'Auto-refresh: ' + countdown + 's'; }, 1000);
    </script>
</body>
</html>
